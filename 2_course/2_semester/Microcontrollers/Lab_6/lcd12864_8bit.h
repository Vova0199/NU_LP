#ifndef LCD_8H
#define LCD_8H
//---------------------------------------------------------------------------
#include <avr/io.h>
#include <util/delay.h>
#include <avr/pgmspace.h>

#define	TextMode	0
#define	GraphMode	1

//команди для керування LCD
#define	_ClearDisplay		0x01

PROGMEM const unsigned char ASCII[][8] =
{

{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  //     0x20   32
{ 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x00 },  // !   0x21   33
{ 0x50, 0x50, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00 },  // "   0x22   34
{ 0x50, 0x50, 0xF8, 0x50, 0xF8, 0x50, 0x50, 0x00 },  // #   0x23   35
{ 0x20, 0x78, 0xA0, 0x70, 0x28, 0xF0, 0x20, 0x00 },  // $   0x24   36
{ 0x00, 0x00, 0xC8, 0xD0, 0x20, 0x58, 0x98, 0x00 },  // %   0x25   37
{ 0x60, 0x90, 0xA0, 0x40, 0xA8, 0x90, 0x68, 0x00 },  // &   0x26   38
{ 0x60, 0x20, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00 },  // '   0x27   39
{ 0x10, 0x20, 0x40, 0x40, 0x40, 0x20, 0x10, 0x00 },  // (   0x28   40
{ 0x40, 0x20, 0x10, 0x10, 0x10, 0x20, 0x40, 0x00 },  // )   0x29   41
{ 0x00, 0x20, 0xA8, 0x70, 0xA8, 0x20, 0x00, 0x00 },  // *   0x2A   42
{ 0x00, 0x20, 0x20, 0xF8, 0x20, 0x20, 0x00, 0x00 },  // +   0x2B   43
{ 0x00, 0x00, 0x00, 0x00, 0x30, 0x10, 0x20, 0x00 },  // ,   0x2C   44
{ 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00 },  // -   0x2D   45
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x60, 0x00 },  // .   0x2E   46
{ 0x00, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00, 0x00 },  // /   0x2F   47
{ 0x70, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x70, 0x00 },  // 0   0x30   48
{ 0x20, 0x60, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00 },  // 1   0x31   49
{ 0x70, 0x88, 0x08, 0x10, 0x20, 0x40, 0xF8, 0x00 },  // 2   0x32   50
{ 0xF8, 0x10, 0x20, 0x10, 0x08, 0x88, 0x70, 0x00 },  // 3   0x33   51
{ 0x10, 0x30, 0x50, 0x90, 0xF8, 0x10, 0x10, 0x00 },  // 4   0x34   52
{ 0xF8, 0x80, 0xF0, 0x08, 0x08, 0x88, 0x70, 0x00 },  // 5   0x35   53
{ 0x30, 0x40, 0x80, 0xF0, 0x88, 0x88, 0x70, 0x00 },  // 6   0x36   54
{ 0xF8, 0x08, 0x10, 0x20, 0x40, 0x40, 0x40, 0x00 },  // 7   0x37   55
{ 0x70, 0x88, 0x88, 0x70, 0x88, 0x88, 0x70, 0x00 },  // 8   0x38   56
{ 0x70, 0x88, 0x88, 0x78, 0x08, 0x10, 0x60, 0x00 },  // 9   0x39   57
{ 0x00, 0x60, 0x60, 0x00, 0x60, 0x60, 0x00, 0x00 },  // :   0x3A   58
{ 0x00, 0x60, 0x60, 0x00, 0x60, 0x20, 0x40, 0x00 },  // ;   0x3B   59
{ 0x10, 0x20, 0x40, 0x80, 0x40, 0x20, 0x10, 0x00 },  // <   0x3C   60
{ 0x00, 0x00, 0xF8, 0x00, 0xF8, 0x00, 0x00, 0x00 },  // =   0x3D   61
{ 0x40, 0x20, 0x10, 0x08, 0x10, 0x20, 0x40, 0x00 },  // >   0x3E   62
{ 0x70, 0x88, 0x08, 0x10, 0x20, 0x00, 0x20, 0x00 },  // ?   0x3F   63
{ 0x00, 0x70, 0x98, 0xA8, 0xB0, 0x80, 0x70, 0x00 },  // @   0x40   64
{ 0x70, 0x88, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x00 },  // A   0x41   65
{ 0xF0, 0x88, 0x88, 0xF0, 0x88, 0x88, 0xF0, 0x00 },  // B   0x42   66
{ 0x70, 0x88, 0x80, 0x80, 0x80, 0x88, 0x70, 0x00 },  // C   0x43   67
{ 0xE0, 0x90, 0x88, 0x88, 0x88, 0x90, 0xE0, 0x00 },  // D   0x44   68
{ 0xF8, 0x80, 0x80, 0xF0, 0x80, 0x80, 0xF8, 0x00 },  // E   0x45   69
{ 0xF8, 0x80, 0x80, 0xF0, 0x80, 0x80, 0x80, 0x00 },  // F   0x46   70
{ 0x70, 0x88, 0x80, 0xB8, 0x88, 0x88, 0x78, 0x00 },  // G   0x47   71
{ 0x88, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x88, 0x00 },  // H   0x48   72
{ 0x70, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00 },  // I   0x49   73
{ 0x38, 0x10, 0x10, 0x10, 0x10, 0x90, 0x60, 0x00 },  // J   0x4A   74
{ 0x88, 0x90, 0xA0, 0xC0, 0xA0, 0x90, 0x88, 0x00 },  // K   0x4B   75
{ 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xF8, 0x00 },  // L   0x4C   76
{ 0x88, 0xD8, 0xA8, 0xA8, 0x88, 0x88, 0x88, 0x00 },  // M   0x4D   77
{ 0x88, 0x88, 0xC8, 0xA8, 0x98, 0x88, 0x88, 0x00 },  // N   0x4E   78
{ 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00 },  // O   0x4F   79
{ 0xF0, 0x88, 0x88, 0xF0, 0x80, 0x80, 0x80, 0x00 },  // P   0x50   80
{ 0x70, 0x88, 0x88, 0x88, 0xA8, 0x90, 0x68, 0x00 },  // Q   0x51   81
{ 0xF0, 0x88, 0x88, 0xF0, 0xA0, 0x90, 0x88, 0x00 },  // R   0x52   82
{ 0x78, 0x80, 0x80, 0x70, 0x08, 0x08, 0xF0, 0x00 },  // S   0x53   83
{ 0xF8, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00 },  // T   0x54   84
{ 0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00 },  // U   0x55   85
{ 0x88, 0x88, 0x88, 0x88, 0x88, 0x50, 0x20, 0x00 },  // V   0x56   86
{ 0x88, 0x88, 0x88, 0xA8, 0xA8, 0xA8, 0x50, 0x00 },  // W   0x57   87
{ 0x88, 0x88, 0x50, 0x20, 0x50, 0x88, 0x88, 0x00 },  // X   0x58   88
{ 0x88, 0x88, 0x88, 0x50, 0x20, 0x20, 0x20, 0x00 },  // Y   0x59   89
{ 0xF8, 0x08, 0x10, 0x20, 0x40, 0x80, 0xF8, 0x00 },  // Z   0x5A   90
{ 0x70, 0x40, 0x40, 0x40, 0x40, 0x40, 0x70, 0x00 },  // [   0x5B   91
{ 0x00, 0x80, 0x40, 0x20, 0x10, 0x08, 0x00, 0x00 },  // \   0x5C   92
{ 0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x70, 0x00 },  // ]   0x5D   93
{ 0x20, 0x50, 0x88, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ^   0x5E   94
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0x00 },  // _   0x5F   95
{ 0x40, 0x20, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00 },  // `   0x60   96
{ 0x00, 0x00, 0x70, 0x08, 0x78, 0x88, 0x78, 0x00 },  // a   0x61   97
{ 0x80, 0x80, 0xB0, 0xC8, 0x88, 0x88, 0xF0, 0x00 },  // b   0x62   98
{ 0x00, 0x00, 0x70, 0x80, 0x80, 0x88, 0x70, 0x00 },  // c   0x63   99
{ 0x08, 0x08, 0x68, 0x98, 0x88, 0x88, 0x78, 0x00 },  // d   0x64   100
{ 0x00, 0x00, 0x70, 0x88, 0xF8, 0x80, 0x70, 0x00 },  // e   0x65   101
{ 0x30, 0x48, 0x40, 0xE0, 0x40, 0x40, 0x40, 0x00 },  // f   0x66   102
{ 0x00, 0x78, 0x88, 0x88, 0x78, 0x08, 0x70, 0x00 },  // g   0x67   103
{ 0x80, 0x80, 0xB0, 0xC8, 0x88, 0x88, 0x88, 0x00 },  // h   0x68   104
{ 0x20, 0x00, 0x60, 0x20, 0x20, 0x20, 0x70, 0x00 },  // i   0x69   105
{ 0x10, 0x00, 0x30, 0x10, 0x10, 0x90, 0x60, 0x00 },  // j   0x6A   106
{ 0x80, 0x80, 0x90, 0xA0, 0xC0, 0xA0, 0x90, 0x00 },  // k   0x6B   107
{ 0x60, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00 },  // l   0x6C   108
{ 0x00, 0x00, 0xD0, 0xA8, 0xA8, 0x88, 0x88, 0x00 },  // m   0x6D   109
{ 0x00, 0x00, 0xB0, 0xC8, 0x88, 0x88, 0x88, 0x00 },  // n   0x6E   110
{ 0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x70, 0x00 },  // o   0x6F   111
{ 0x00, 0x00, 0xF0, 0x88, 0xF0, 0x80, 0x80, 0x00 },  // p   0x70   112
{ 0x00, 0x00, 0x68, 0x98, 0x78, 0x08, 0x08, 0x00 },  // q   0x71   113
{ 0x00, 0x00, 0xB0, 0xC8, 0x80, 0x80, 0x80, 0x00 },  // r   0x72   114
{ 0x00, 0x00, 0x70, 0x80, 0x70, 0x08, 0xF0, 0x00 },  // s   0x73   115
{ 0x40, 0x40, 0xE0, 0x40, 0x40, 0x48, 0x30, 0x00 },  // t   0x74   116
{ 0x00, 0x00, 0x88, 0x88, 0x88, 0x98, 0x68, 0x00 },  // u   0x75   117
{ 0x00, 0x00, 0x88, 0x88, 0x88, 0x50, 0x20, 0x00 },  // v   0x76   118
{ 0x00, 0x00, 0x88, 0x88, 0xA8, 0xA8, 0x50, 0x00 },  // w   0x77   119
{ 0x00, 0x00, 0x88, 0x50, 0x20, 0x50, 0x88, 0x00 },  // x   0x78   120
{ 0x00, 0x00, 0x88, 0x88, 0x78, 0x08, 0x70, 0x00 },  // y   0x79   121
{ 0x00, 0x00, 0xF8, 0x10, 0x20, 0x40, 0xF8, 0x00 },  // z   0x7A   122
{ 0x10, 0x20, 0x20, 0x40, 0x20, 0x20, 0x10, 0x00 },  // {   0x7B   123
{ 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00 },  // |   0x7C   124
{ 0x40, 0x20, 0x20, 0x10, 0x20, 0x20, 0x40, 0x00 },  // }   0x7D   125
{ 0x00, 0x00, 0x40, 0xA8, 0x10, 0x00, 0x00, 0x00 },  // ~   0x7E   126
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  //    0x7F   127
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ђ   0x80   128
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ѓ   0x81   129
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ‚   0x82   130
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ѓ   0x83   131
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // „   0x84   132
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA8, 0x00 },  // …   0x85   133
{ 0x20, 0x20, 0xF8, 0x20, 0x20, 0x20, 0x20, 0x20 },  // †   0x86   134
{ 0x20, 0x20, 0xF8, 0x20, 0x20, 0xF8, 0x20, 0x20 },  // ‡   0x87   135
{ 0x00, 0x38, 0x40, 0xF0, 0x40, 0xF0, 0x40, 0x38 },  // €   0x88   136
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ‰   0x89   137
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Љ   0x8A   138
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ‹   0x8B   139
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Њ   0x8C   140
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ќ   0x8D   141
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ћ   0x8E   142
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Џ   0x8F   143
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ђ   0x90   144
{ 0x20, 0x40, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ‘   0x91   145
{ 0x30, 0x10, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ’   0x92   146
{ 0x48, 0x90, 0xD8, 0x00, 0x00, 0x00, 0x00, 0x00 },  // “   0x93   147
{ 0xD8, 0x48, 0x90, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ”   0x94   148
{ 0x00, 0x00, 0x70, 0xF8, 0xF8, 0x70, 0x00, 0x00 },  // •   0x95   149
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // –   0x96   150
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // —   0x97   151
{ 0x00, 0x00, 0x00, 0xF0, 0x90, 0x90, 0xF0, 0x00 },  //    0x98   152
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ™   0x99   153
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // љ   0x9A   154
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ›   0x9B   155
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // њ   0x9C   156
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ќ   0x9D   157
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ћ   0x9E   158
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // џ   0x9F   159
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  //     0xA0   160
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ў   0xA1   161
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ў   0xA2   162
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ј   0xA3   163
{ 0x00, 0x88, 0x70, 0x50, 0x70, 0x88, 0x00, 0x00 },  // ¤   0xA4   164
{ 0x08, 0xF8, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00 },  // Ґ   0xA5   165
{ 0x20, 0x20, 0x20, 0x00, 0x00, 0x20, 0x20, 0x20 },  // ¦   0xA6   166
{ 0x70, 0x88, 0x60, 0x90, 0x48, 0x30, 0x88, 0x70 },  // §   0xA7   167
{ 0x50, 0x00, 0xF8, 0x80, 0xE0, 0x80, 0xF8, 0x00 },  // Ё   0xA8   168
{ 0x00, 0x00, 0x30, 0x40, 0x40, 0x30, 0x00, 0x00 },  // ©   0xA9   169
{ 0x70, 0x88, 0x80, 0xE0, 0x80, 0x88, 0x70, 0x00 },  // Є   0xAA   170
{ 0x00, 0x28, 0x50, 0xA0, 0x50, 0x28, 0x00, 0x00 },  // «   0xAB   171
{ 0x00, 0x00, 0xF8, 0x08, 0x00, 0x00, 0x00, 0x00 },  // ¬   0xAC   172
{ 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00 },  // ­   0xAD   173
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ®   0xAE   174
{ 0x50, 0x00, 0x70, 0x20, 0x20, 0x20, 0x70, 0x00 },  // Ї   0xAF   175
{ 0x00, 0x20, 0x50, 0x20, 0x00, 0x00, 0x00, 0x00 },  // °   0xB0   176
{ 0x20, 0x20, 0xF8, 0x20, 0x20, 0x00, 0xF8, 0x00 },  // ±   0xB1   177
{ 0x70, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70, 0x00 },  // І   0xB2   178
{ 0x00, 0x20, 0x00, 0x20, 0x20, 0x20, 0x20, 0x00 },  // і   0xB3   179
{ 0x00, 0x00, 0x10, 0x70, 0x40, 0x40, 0x40, 0x00 },  // ґ   0xB4   180
{ 0x00, 0x00, 0x50, 0x50, 0x50, 0x78, 0x40, 0x40 },  // µ   0xB5   181
{ 0x00, 0x78, 0xE8, 0xE8, 0x68, 0x28, 0x28, 0x28 },  // ¶   0xB6   182
{ 0x00, 0x00, 0x00, 0x60, 0x60, 0x00, 0x00, 0x00 },  // ·   0xB7   183
{ 0x90, 0x00, 0x60, 0x90, 0xE0, 0x80, 0x70, 0x00 },  // ё   0xB8   184
{ 0x18, 0x18, 0x00, 0x90, 0xD0, 0xB0, 0x90, 0x00 },  // №   0xB9   185
{ 0x00, 0x00, 0x70, 0x80, 0xE0, 0x80, 0x70, 0x00 },  // є   0xBA   186
{ 0x00, 0xA0, 0x50, 0x28, 0x50, 0xA0, 0x00, 0x00 },  // »   0xBB   187
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ј   0xBC   188
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // Ѕ   0xBD   189
{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },  // ѕ   0xBE   190
{ 0x00, 0x00, 0x50, 0x00, 0x60, 0x20, 0x70, 0x00 },  // ї   0xBF   191
{ 0x20, 0x50, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x00 },  // А   0xC0   192
{ 0xF8, 0x80, 0x80, 0xF0, 0x88, 0x88, 0xF0, 0x00 },  // Б   0xC1   193
{ 0xF0, 0x88, 0x88, 0xF0, 0x88, 0x88, 0xF0, 0x00 },  // В   0xC2   194
{ 0xF8, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00 },  // Г   0xC3   195
{ 0x70, 0x50, 0x50, 0x50, 0x50, 0xF8, 0x88, 0x00 },  // Д   0xC4   196
{ 0xF8, 0x80, 0x80, 0xF0, 0x80, 0x80, 0xF8, 0x00 },  // Е   0xC5   197
{ 0xA8, 0xA8, 0xA8, 0x70, 0xA8, 0xA8, 0xA8, 0x00 },  // Ж   0xC6   198
{ 0x70, 0x88, 0x08, 0x30, 0x08, 0x88, 0x70, 0x00 },  // З   0xC7   199
{ 0x88, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x88, 0x00 },  // И   0xC8   200
{ 0x20, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x88, 0x00 },  // Й   0xC9   201
{ 0x88, 0x90, 0xA0, 0xC0, 0xA0, 0x90, 0x88, 0x00 },  // К   0xCA   202
{ 0x38, 0x48, 0x48, 0x48, 0x48, 0x48, 0x88, 0x00 },  // Л   0xCB   203
{ 0x88, 0xD8, 0xA8, 0xA8, 0x88, 0x88, 0x88, 0x00 },  // М   0xCC   204
{ 0x88, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x88, 0x00 },  // Н   0xCD   205
{ 0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00 },  // О   0xCE   206
{ 0xF8, 0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0x00 },  // П   0xCF   207
{ 0xF0, 0x88, 0x88, 0xF0, 0x80, 0x80, 0x80, 0x00 },  // Р   0xD0   208
{ 0x70, 0x88, 0x80, 0x80, 0x80, 0x88, 0x70, 0x00 },  // С   0xD1   209
{ 0xF8, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00 },  // Т   0xD2   210
{ 0x88, 0x88, 0x88, 0x78, 0x08, 0x08, 0x70, 0x00 },  // У   0xD3   211
{ 0x70, 0xA8, 0xA8, 0xA8, 0x70, 0x20, 0x20, 0x00 },  // Ф   0xD4   212
{ 0x88, 0x88, 0x50, 0x20, 0x50, 0x88, 0x88, 0x00 },  // Х   0xD5   213
{ 0x90, 0x90, 0x90, 0x90, 0x90, 0xF8, 0x08, 0x00 },  // Ц   0xD6   214
{ 0x88, 0x88, 0x88, 0x78, 0x08, 0x08, 0x08, 0x00 },  // Ч   0xD7   215
{ 0x88, 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xF8, 0x00 },  // Ш   0xD8   216
{ 0xA8, 0xA8, 0xA8, 0xA8, 0xA8, 0xF8, 0x08, 0x00 },  // Щ   0xD9   217
{ 0xC0, 0x40, 0x40, 0x70, 0x48, 0x48, 0x70, 0x00 },  // Ъ   0xDA   218
{ 0x88, 0x88, 0x88, 0xC8, 0xA8, 0xA8, 0xC8, 0x00 },  // Ы   0xDB   219
{ 0x40, 0x40, 0x40, 0x70, 0x48, 0x48, 0x70, 0x00 },  // Ь   0xDC   220
{ 0x70, 0x88, 0x08, 0x38, 0x08, 0x88, 0x70, 0x00 },  // Э   0xDD   221
{ 0x90, 0xA8, 0xA8, 0xE8, 0xA8, 0xA8, 0x90, 0x00 },  // Ю   0xDE   222
{ 0x78, 0x88, 0x88, 0x78, 0x28, 0x48, 0x88, 0x00 },  // Я   0xDF   223
{ 0x00, 0x00, 0x70, 0x08, 0x78, 0x88, 0x78, 0x00 },  // а   0xE0   224
{ 0x08, 0x70, 0x80, 0xF0, 0x88, 0x88, 0x70, 0x00 },  // б   0xE1   225
{ 0x00, 0x00, 0xE0, 0x90, 0xE0, 0x90, 0xE0, 0x00 },  // в   0xE2   226
{ 0x00, 0x00, 0xF0, 0x90, 0x80, 0x80, 0x80, 0x00 },  // г   0xE3   227
{ 0x00, 0x00, 0x70, 0x50, 0x50, 0xF8, 0x88, 0x00 },  // д   0xE4   228
{ 0x00, 0x00, 0x70, 0x88, 0xF8, 0x80, 0x70, 0x00 },  // е   0xE5   229
{ 0x00, 0x00, 0xA8, 0xA8, 0x70, 0xA8, 0xA8, 0x00 },  // ж   0xE6   230
{ 0x00, 0x00, 0x70, 0x08, 0x30, 0x08, 0x70, 0x00 },  // з   0xE7   231
{ 0x00, 0x00, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x00 },  // и   0xE8   232
{ 0x50, 0x20, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x00 },  // й   0xE9   233
{ 0x00, 0x00, 0x90, 0xA0, 0xC0, 0xA0, 0x90, 0x00 },  // к   0xEA   234
{ 0x00, 0x00, 0x38, 0x48, 0x48, 0x48, 0x88, 0x00 },  // л   0xEB   235
{ 0x00, 0x00, 0x88, 0xD8, 0xA8, 0x88, 0x88, 0x00 },  // м   0xEC   236
{ 0x00, 0x00, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x00 },  // н   0xED   237
{ 0x00, 0x00, 0x70, 0x88, 0x88, 0x88, 0x70, 0x00 },  // о   0xEE   238
{ 0x00, 0x00, 0xF8, 0x88, 0x88, 0x88, 0x88, 0x00 },  // п   0xEF   239
{ 0x00, 0x00, 0xF0, 0x88, 0xF0, 0x80, 0x80, 0x00 },  // р   0xF0   240
{ 0x00, 0x00, 0x70, 0x80, 0x80, 0x80, 0x70, 0x00 },  // с   0xF1   241
{ 0x00, 0x00, 0xF8, 0x20, 0x20, 0x20, 0x20, 0x00 },  // т   0xF2   242
{ 0x00, 0x00, 0x88, 0x88, 0x78, 0x08, 0x70, 0x00 },  // у   0xF3   243
{ 0x00, 0x00, 0x70, 0xA8, 0x70, 0x20, 0x20, 0x00 },  // ф   0xF4   244
{ 0x00, 0x00, 0x88, 0x50, 0x20, 0x50, 0x88, 0x00 },  // х   0xF5   245
{ 0x00, 0x00, 0x90, 0x90, 0x90, 0xF8, 0x08, 0x00 },  // ц   0xF6   246
{ 0x00, 0x00, 0x88, 0x88, 0x78, 0x08, 0x08, 0x00 },  // ч   0xF7   247
{ 0x00, 0x00, 0xA8, 0xA8, 0xA8, 0xA8, 0xF8, 0x00 },  // ш   0xF8   248
{ 0x00, 0x00, 0xA8, 0xA8, 0xA8, 0xF8, 0x08, 0x00 },  // щ   0xF9   249
{ 0x00, 0x00, 0xC0, 0x40, 0x70, 0x48, 0x70, 0x00 },  // ъ   0xFA   250
{ 0x00, 0x00, 0x88, 0x88, 0xC8, 0xA8, 0xC8, 0x00 },  // ы   0xFB   251
{ 0x00, 0x00, 0x40, 0x40, 0x70, 0x48, 0x70, 0x00 },  // ь   0xFC   252
{ 0x00, 0x00, 0x70, 0x88, 0x38, 0x88, 0x70, 0x00 },  // э   0xFD   253
{ 0x00, 0x00, 0x90, 0xA8, 0xE8, 0xA8, 0x90, 0x00 },  // ю   0xFE   254
{ 0x00, 0x00, 0x78, 0x88, 0x78, 0x28, 0xC8, 0x00 }   // я   0xFF   255
};


unsigned char ColumnText=0;
//---------------------------------------------------------------------------
void InitLCD_12864(unsigned char mode)	//8-Bit Interface
{
	LCDdataDDR  = 0xFF;			//port out
	LCDdataPORT = 0x00;

	LCDcontrolDDR |= (1<<RS)|(1<<RW)|(1<<E);
//RESET
//	LCDcontrolDDR |= ((1<<RS)|(1<<RW)|(1<<E)|(1<<Rst));
//	LCDcontrolPORT &= ~(1<<Rst);
//	_delay_us(0.1);
//	LCDcontrolPORT |= (1<<Rst);

	//pause 50 mSec
	_delay_ms(50);
	LCDcontrolPORT |= (1<<Rst);
	LCDcontrolPORT &= ~(1<<RS);
	LCDcontrolPORT &= ~(1<<RW);
//	LCDdataDDR  = 0xFF;			//port out
	LCDdataPORT = 0b00110000;	//шина 8 біт
	LCDcontrolPORT |= (1<<E);
	_delay_us(0.1);
	LCDcontrolPORT &= ~(1<<E);
	//pause 120 uSec
	_delay_us(120);
	//повтор
	LCDcontrolPORT |= (1<<E);
	_delay_us(0.1);
	LCDcontrolPORT &= ~(1<<E);
	//pause 50 uSec
	_delay_us(50);
	if(mode == TextMode)
	{
		LCDdataPORT = 0b00001100;	//включити дисплей (курсор)
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		LCDcontrolPORT &= ~(1<<E);
		//pause 120 uSec
		_delay_us(120);
		LCDdataPORT = 0b00000001;	//очистити дисплей
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		LCDcontrolPORT &= ~(1<<E);
		//pause 10 mSec
		_delay_ms(10);
		LCDdataPORT = 0b00000110;	//інкремент без зсуву
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		LCDcontrolPORT &= ~(1<<E);
		//pause 20 uSec
		_delay_us(20);
	}
	else if(mode == GraphMode)
	{
		LCDdataPORT = 0b00110100;	//перехід у розширений набір
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		LCDcontrolPORT &= ~(1<<E);
		//pause 80 uSec
		_delay_us(80);

		LCDdataPORT = 0b00110110;	//вкл. граф. режим
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		LCDcontrolPORT &= ~(1<<E);
		//pause 80 uSec
		_delay_us(80);

		LCD_Clear();
	}
}
//---------------------------------------------------------------------------
void BF_Free() //Перевірка прапорця зайнятості BF (busy flag)
{
	//конфігуруємо порт даних на вхід високоімпедансний
	LCDdataDDR  = 0x00;
	LCDdataPORT = 0x00;
	LCDcontrolPORT &= ~(1<<RS);
	LCDcontrolPORT |= (1<<RW);
	do
	{
		LCDcontrolPORT &= ~(1<<E);
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
	}
	while( LCDdataPIN&(1<<7) );
	LCDcontrolPORT &= ~(1<<E);
}
//---------------------------------------------------------------------------
void LCD_WriteCommand(unsigned char Command) //запис команди
{
	BF_Free();
	LCDcontrolPORT &= ~(1<<RS);
	LCDcontrolPORT &= ~(1<<RW);
	LCDdataDDR  = 0xFF;			//порт на вихід
	LCDdataPORT = Command;
	//строб E
	LCDcontrolPORT |= (1<<E);
	_delay_us(0.1);
	LCDcontrolPORT &= ~(1<<E);
}
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
void LCD_WriteLetterText(unsigned char Letter) //запис літери на Екран
{
	if(ColumnText>15) return;
	ColumnText++;
	BF_Free();
	LCDcontrolPORT |=  (1<<RS);
	LCDcontrolPORT &= ~(1<<RW);

	LCDdataDDR  = 0xFF;			//порт на вихід
	LCDdataPORT = Letter;
	//строб E
	LCDcontrolPORT |= (1<<E);
	_delay_us(0.1);
	LCDcontrolPORT &= ~(1<<E);
}
//---------------------------------------------------------------------------
void LCD_WriteStrText(volatile unsigned char *str)					//вивід стрічки на екран LCD
{
	for(int i=0;i<255;i++)
		if (str[i]=='\0')
			return;
		else
			LCD_WriteLetterText(str[i]);
}
//---------------------------------------------------------------------------
void LCD_GotoYX_Text(unsigned char Y, unsigned char X)		//перехід курсору 
{
	if(X>16) return;										//за координатами
	ColumnText=(X-1);
	unsigned char temp_letter;
 	switch(Y)
	{
		case 1: LCD_WriteCommand(((1<<7)|(0x80+ColumnText/2))); break;
		case 3: LCD_WriteCommand(((1<<7)|(0x88+ColumnText/2))); break;
		case 2: LCD_WriteCommand(((1<<7)|(0x90+ColumnText/2))); break;
		case 4: LCD_WriteCommand(((1<<7)|(0x98+ColumnText/2))); break;
	}
	if(ColumnText%2) 
	{
		BF_Free();
		//конфігуруємо порт даних на вхід високоімпедансний
		LCDdataDDR  = 0x00;
		LCDdataPORT = 0x00;
		LCDcontrolPORT |= (1<<RS);
		LCDcontrolPORT |= (1<<RW);
		//строб E
		LCDcontrolPORT |= (1<<E);
		_delay_us(0.1);
		temp_letter = LCDdataPIN;
		LCDcontrolPORT &= ~(1<<E);
	 	switch(Y)
		{
			case 1: LCD_WriteCommand(((1<<7)|(0x80+ColumnText/2))); break;
			case 3: LCD_WriteCommand(((1<<7)|(0x88+ColumnText/2))); break;
			case 2: LCD_WriteCommand(((1<<7)|(0x90+ColumnText/2))); break;
			case 4: LCD_WriteCommand(((1<<7)|(0x98+ColumnText/2))); break;
		}
		LCD_WriteLetterText(temp_letter);
	}  
}
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
//---------------------------------------------------------------------------
unsigned char RowGraph=0, ColumnGraph=0, Y_Graph=1;
unsigned char Temp8_8[8];
//---------------------------------------------------------------------------
void LCD_GotoYX(unsigned char Y, unsigned char X)		//перехід курсору 
{
	if(Y>8 || X>16) return;
	Y_Graph = Y;
	if(Y<5)	
	{
		RowGraph=(Y-1)*8; 
		ColumnGraph=X-1;
	}
	else
	{
		RowGraph=(Y-5)*8;
		ColumnGraph=X+15;
	}
	//якщо непарний X, тоді необхідно зчитати попередній символ 8x8
	if(ColumnGraph%2)   
	{	
		for(unsigned char i=0;i<8;i++)
		{
			LCD_WriteCommand( (1<<7) |  (RowGraph+i)  );
			LCD_WriteCommand( (1<<7) |  (ColumnGraph/2) );
			BF_Free();
			//конфігуруємо порт даних на вхід високоімпедансний
			LCDdataDDR  = 0x00;
			LCDdataPORT = 0x00;
			LCDcontrolPORT |= (1<<RS);
			LCDcontrolPORT |= (1<<RW);
			//строб E
			LCDcontrolPORT |= (1<<E);
			_delay_us(0.1);
			LCDcontrolPORT &= ~(1<<E);
			_delay_us(40);
			//строб E
			LCDcontrolPORT |= (1<<E);
			_delay_us(0.1);
			Temp8_8[i] = LCDdataPIN;
			LCDcontrolPORT &= ~(1<<E);
		}
	}
}
//---------------------------------------------------------------------------
void LCD_WriteByte(unsigned char Byte) //запис одного байта на Екран
{
	BF_Free();
	LCDcontrolPORT |=  (1<<RS);
	LCDcontrolPORT &= ~(1<<RW);

	LCDdataDDR  = 0xFF;			//порт на вихід
	LCDdataPORT = Byte;
	//строб E
	LCDcontrolPORT |= (1<<E);
	_delay_us(0.1);
	LCDcontrolPORT &= ~(1<<E);
}
//---------------------------------------------------------------------------
void LCD_Clear(void) //очищення екрану
{
	RowGraph=0; ColumnGraph=0; Y_Graph=1;
	for(unsigned char j=0;j<32;j++)
		for(unsigned char i=0;i<16;i++)
		{
			LCD_WriteCommand( (1<<7) |  j);
			LCD_WriteCommand( (1<<7) |  i);
			
			LCD_WriteByte(0x00);
			LCD_WriteByte(0x00);
		}
}
//---------------------------------------------------------------------------
void LCD_WriteLetter(unsigned char Letter) //запис літери на Екран
{
	if(Y_Graph<9 && ColumnGraph>31) return;
	if(Y_Graph<5 && ColumnGraph>15) return;
	for(unsigned char i=0;i<8;i++)
	{
		LCD_WriteCommand( (1<<7) |  (RowGraph+i)  );
		LCD_WriteCommand( (1<<7) |  (ColumnGraph/2) );
		if(ColumnGraph%2)
			LCD_WriteByte(Temp8_8[i]);
		Temp8_8[i]=pgm_read_byte(&ASCII[Letter-0x20][i]);
		LCD_WriteByte(Temp8_8[i]);	
	}
	ColumnGraph++;
}
//---------------------------------------------------------------------------
void LCD_WriteStr(volatile char *str)					//вивід стрічки на екран LCD
{
	unsigned char logical;
	for(int k=0;k<16;k++)
		if (str[k]=='\0')
			return;
		else
		{
			logical=0;
			if(Y_Graph<9 && ColumnGraph>31) return;
			if(Y_Graph<5 && ColumnGraph>15) return;
			for(unsigned char i=0;i<8;i++)
			{
				LCD_WriteCommand( (1<<7) |  (RowGraph+i)  );
				LCD_WriteCommand( (1<<7) |  (ColumnGraph/2) );

				if(ColumnGraph%2 != 0)
					LCD_WriteByte(Temp8_8[i]);

				Temp8_8[i]=pgm_read_byte(&ASCII[str[k]-0x20][i]);
				LCD_WriteByte(Temp8_8[i]);

				if(ColumnGraph%2==0 && str[k+1]!='\0')
				{
					Temp8_8[i]=pgm_read_byte(&ASCII[str[k+1]-0x20][i]);
					LCD_WriteByte(Temp8_8[i]);
					logical=1;
				}
			}
			ColumnGraph++;
			if(logical)
			{
				ColumnGraph++;
				k++;
			}
		}
}
//---------------------------------------------------------------------------
void LCD_WriteStrPROGMEM(unsigned char *str)	//вивід стрічки з нульовим елем.,
{												//записаної у флеші
	unsigned char logical;
	for(int k=0;k<16;k++)
		if (pgm_read_byte(&(str[k]) )=='\0')
			return;
		else
		{
			logical=0;
			if(Y_Graph<9 && ColumnGraph>31) return;
			if(Y_Graph<5 && ColumnGraph>15) return;
			for(unsigned char i=0;i<8;i++)
			{
				LCD_WriteCommand( (1<<7) |  (RowGraph+i)  );
				LCD_WriteCommand( (1<<7) |  (ColumnGraph/2) );

				if(ColumnGraph%2 != 0)
					LCD_WriteByte(Temp8_8[i]);

				Temp8_8[i]=pgm_read_byte(&ASCII[pgm_read_byte(&(str[k]))-0x20][i]);
				LCD_WriteByte(Temp8_8[i]);

				if(ColumnGraph%2==0 && pgm_read_byte(&(str[k+1]))   !='\0')
				{
					Temp8_8[i]=pgm_read_byte(&ASCII[pgm_read_byte(&(str[k+1]))-0x20][i]);
					LCD_WriteByte(Temp8_8[i]);
					logical=1;
				}
			}
			ColumnGraph++;
			if(logical)
			{
				ColumnGraph++;
				k++;
			}
		}
}
//---------------------------------------------------------------------------
#endif
